<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab 5 - Deploy App on Kubernetes using Helm :: Learning Cloudnative 101</title>
    <link rel="canonical" href="https://ibm-cloud-architecture.github.io/learning-cloudnative-101/web/1.0.0/Kubernetes_Module/Lab5.html">
    <meta name="generator" content="Antora 2.0.1">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <p>Learning Cloudnative 101</p>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
    </div>
  </nav>
</header><div class="body">
<div class="nav-container" data-component="web" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../Cloud_Native_Module/Cloudnative_Overview.html">Learning Cloudnative 101</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cloud Native</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Cloud_Native_Module/Cloudnative_Overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Cloud_Native_Module/Cloudnative_framework_prog_model.html">Framework &amp; Programming Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Cloud_Native_Module/Cloudnative_app_development.html">App Development</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Cloud_Native_Module/Lab1.html">Lab 1: App Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Containers</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Docker.html">Containerization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Lab2.html">Lab 2: Docker</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Kubernetes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kubernetesPatterns.html">Kubernetes Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="Lab3.html">Lab 3: Deploy Kubernetes App</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="Lab3.html#_deploy_kubernetes_app_using_openshift_console">Using OCP Console</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="Lab3.html#_deploy_kubernetes_app_using_oc_cli">Using oc CLI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="Lab4.html">Lab 4: Update Kubernetes App</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="operators.html">Helm/Operator Patterns</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="Lab5.html">Lab 5: Helm Templates</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cloud Foundry to Kubernetes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../CF_Migrate_Module/Kubernetes-for-CF.html">Kubernetes for CF users</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../CF_Migrate_Module/CF-migration.html">CF Migration Tool</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../CF_Migrate_Module/cf-migrate-exercise-ocp.html">Lab 7: CF2K8S - OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../CF_Migrate_Module/cf-migrate-exercise-iks.html">Lab 7: CF2K8S - IKS</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">DevOps and CICD</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DevOps_Module/Devops_Concepts.html">DevOps Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DevOps_Module/cicd.html">CI/CD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DevOps_Module/devops_tooling.html">Devops Tooling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DevOps_Module/Lab8_Openshift.html">Lab 8: CI - Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DevOps_Module/Lab8_IKS.html">Lab 8: CI - IKS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DevOps_Module/Lab9_OpenShift.html">Lab 9: CD - Openshift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DevOps_Module/Lab9_IKS.html">Lab 9: CD - IKS</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Learning Cloudnative 101</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Learning Cloudnative 101</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../Cloud_Native_Module/Cloudnative_Overview.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../Cloud_Native_Module/Cloudnative_Overview.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../Cloud_Native_Module/Cloudnative_Overview.html">Learning Cloudnative 101</a></li>
    <li>Kubernetes</li>
    <li><a href="Lab5.html">Lab 5: Helm Templates</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/ibm-cloud-architecture/learning-cloudnative-101/edit/master/modules/ROOT/pages/Kubernetes_Module/Lab5.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1 class="page">Lab 5 - Deploy App on Kubernetes using Helm</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_ibm_cloud_login">IBM Cloud Login</a></li>
<li><a href="#_accessing_the_kubernetes_cluster">Accessing the Kubernetes Cluster</a></li>
<li><a href="#_getting_the_sample_application">Getting the Sample Application</a></li>
<li><a href="#_deploying_the_sample_application_using_helm">Deploying the Sample Application using Helm</a>
<ul class="sectlevel2">
<li><a href="#_checking_the_namespace">Checking the Namespace</a></li>
<li><a href="#_application_deployment">Application Deployment</a></li>
<li><a href="#_accessing_the_application">Accessing the Application</a></li>
</ul>
</li>
<li><a href="#_conclusion">Conclusion</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lab, you will learn about how to deploy applications to Kubernetes using Helm. We will be using pre-created helm charts for the deployment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>You will need an IBM Account for <a href="https://cloud.ibm.com/">IBM Cloud</a></p>
</li>
<li>
<p>Downloaded and installed the IBM Cloud CLI at <a href="https://cloud.ibm.com/docs/cli?topic=cloud-cli-getting-started#step1-install-idt">IBM Cloud CLI Installation</a>. Follow the instructions for your computer&#8217;s operating system.</p>
</li>
<li>
<p>Downloaded and installed the Helm CLI at <a href="https://github.com/helm/helm#install">Helm CLI Installation</a>.</p>
</li>
<li>
<p>Downloaded and installed the Kubernetes CLI at <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">Kubernetes CLI Installation</a>. Follow the instructions for your computer&#8217;s operating system.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ibm_cloud_login"><a class="anchor" href="#_ibm_cloud_login"></a>IBM Cloud Login</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start by opening a web browser and navigating to <a href="https://cloud.ibm.com/">IBM Cloud</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/Cloud-Login.png" alt="Cloud Login">
</div>
</div>
<div class="paragraph">
<p>Next <strong><em>login</em></strong> with your IBM Cloud login you created.  After login you will be navigated to your <strong>Cloud Dashboard</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/IBM_Cloud_Dashboard.png" alt="IBM Cloud Dashboard">
</div>
</div>
<div class="paragraph">
<p>On the <strong>Cloud Dashboard</strong> in the resource summary section, select <strong>Kubernetes Clusters</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/CL_Dash_Kube.png" alt="][">
</div>
</div>
<div class="paragraph">
<p>In Kubernetes Cluster list, select the cluster you would like to access. Make sure the cluster you select has a blue square icon next to it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_accessing_the_kubernetes_cluster"><a class="anchor" href="#_accessing_the_kubernetes_cluster"></a>Accessing the Kubernetes Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once on the <strong>Overview</strong> screen of your Kubernetes cluster in the top right corner, select <strong>Connect via CLI</strong> and follow the onscreen instructions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/kube-connect.png" alt="kube connect">
</div>
</div>
<div class="paragraph">
<p>Once logged in with the <strong>CLI</strong> we need to get the sample application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_the_sample_application"><a class="anchor" href="#_getting_the_sample_application"></a>Getting the Sample Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Download the sample application from Github: <a href="https://github.com/ibm-cloud-architecture/cloudnative_sample_app">Sample App</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploying_the_sample_application_using_helm"><a class="anchor" href="#_deploying_the_sample_application_using_helm"></a>Deploying the Sample Application using Helm</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section we will deploy the sample application that you downloaded using the Helm CLI in your terminal or cmd prompt.
The helm charts are already pre-created in the <code>/chart</code> directory of the application directory.</p>
</div>
<div class="sect2">
<h3 id="_checking_the_namespace"><a class="anchor" href="#_checking_the_namespace"></a>Checking the Namespace</h3>
<div class="paragraph">
<p>To check the namespace you are deploying your application to run the following command:</p>
</div>
<div class="listingblock">
<div class="title">View Namespace</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc projects</code></pre>
</div>
</div>
<div class="paragraph">
<p>Always double check the namespace your Kubernetes is set for to make sure you are deploying the application where you would like it to be in your Kubernetes Cluster.</p>
</div>
</div>
<div class="sect2">
<h3 id="_application_deployment"><a class="anchor" href="#_application_deployment"></a>Application Deployment</h3>
<div class="paragraph">
<p>To deploy the Application we first want to ensure that we have helm template charts created. In this sample app we won&#8217;t have to create any templates, but we are going to modify the deployment.yaml using templates. Let&#8217;s start by doing that.</p>
</div>
<div class="paragraph">
<p>In the <code>chart/cloudnativesampleapp</code> directory in your sample application run:</p>
</div>
<div class="listingblock">
<div class="title">Changing Replica Count</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">helm template . --set replicaCount=2 &gt; deployment.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>That will set the replicaCount in the deployment file to 2. Next we need to deploy the new change by running the following:</p>
</div>
<div class="listingblock">
<div class="title">Deploy Deployment</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc apply -f deployment.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>And that&#8217;s it. You have now deployed using a Helm Template.</p>
</div>
<div class="paragraph">
<p>To verify your deployment just run:</p>
</div>
<div class="listingblock">
<div class="title">Verify Deployment</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get deployment</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_accessing_the_application"><a class="anchor" href="#_accessing_the_application"></a>Accessing the Application</h3>
<div class="paragraph">
<p>To access the application we need to expose the service.  To do that we will run the following:</p>
</div>
<div class="listingblock">
<div class="title">Expose Service</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc expose service cloudnativesampleapp-service</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we need to find the route that was exposed for the application. We find that by running:</p>
</div>
<div class="listingblock">
<div class="title">Service Route</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get route</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next copy the <code>PATH</code> it will look similar to <code>greeting-service-deploy-sample.gse-cloud-native-fa9ee67c9ab6a7791435450358e564cc-0001.us-east.containers.appdomain.cloud</code>.
Finally we want to run a <code>curl</code> against the copied path with <code>/greeting</code> appended on the end to see the response.</p>
</div>
<div class="listingblock">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl PATH/greeting</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should get a response similar to: <code>Welcome to Cloudnative bootcamp !!!</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have successfully completed this lab! Let&#8217;s take a look at what you learned and did today:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Modified a Helm Chart value.</p>
</li>
<li>
<p>Deployed an application using a Helm Chart.</p>
</li>
<li>
<p>Exposed the application to the internet.</p>
</li>
<li>
<p>Accessed the deployed application via a CURL command.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
